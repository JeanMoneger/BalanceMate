<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Visualise Stabilogram and Confidence Ellipse • BalanceMate</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualise Stabilogram and Confidence Ellipse">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BalanceMate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Butterworth_it.html">Filtering Postural Data Using a Butterworth Filter</a></li>
    <li><a class="dropdown-item" href="../articles/Compute_Postural_Indicators.html">Compute Postural Indicators</a></li>
    <li><a class="dropdown-item" href="../articles/CoPX_ComputeR.html">Compute CoP X</a></li>
    <li><a class="dropdown-item" href="../articles/CoPY_ComputeR.html">Compute CoP-Y</a></li>
    <li><a class="dropdown-item" href="../articles/EllipseArea.html">Compute X% Confidence Ellipse Area</a></li>
    <li><a class="dropdown-item" href="../articles/Epoch_SliceR.html">Synthetise your data into time-bins</a></li>
    <li><a class="dropdown-item" href="../articles/Mean_CoP_ComputeR.html">Compute Mean CoP displacements</a></li>
    <li><a class="dropdown-item" href="../articles/Merge_PosData.html">Merge and Structure postural data</a></li>
    <li><a class="dropdown-item" href="../articles/SD_CoP_ComputeR.html">Compute Standard deviations of CoP displacements</a></li>
    <li><a class="dropdown-item" href="../articles/SpaghettEllipse.html">Visualise Stabilogram and Confidence Ellipse</a></li>
    <li><a class="dropdown-item" href="../articles/SPL_ComputeR.html">Compute Sway Path Length</a></li>
    <li><a class="dropdown-item" href="../articles/Time_StampeR.html">Time_StampeR</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JeanMoneger/BalanceMate/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Visualise Stabilogram and Confidence Ellipse</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JeanMoneger/BalanceMate/blob/HEAD/vignettes/SpaghettEllipse.Rmd" class="external-link"><code>vignettes/SpaghettEllipse.Rmd</code></a></small>
      <div class="d-none name"><code>SpaghettEllipse.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jeanmoneger.github.io/BalanceMate">BalanceMate</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>During your exploration of postural data, you might be interested in
visualising CoP displacements. This can be done using stabilograms that
will display CoP displacements on the medio-lateral and antero-posterior
axes.</p>
<p>Sometimes these plots are called “Spaghetti plots”, because they do
look like spaghetti. However, it is important to note that spaghetti
plots are also the names of other types of plots that - arguably - look
slightly less like spaghetti.</p>
<p>The <code>SpaghettEllipse</code> command will output a spaghetti plot
coupled with the X% confidence ellipse area.</p>
</div>
<div class="section level2">
<h2 id="example-usage">Example Usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h2>
<p>You collected the data of 6 participants who viewed passively
pictures for 100 seconds with a sample rate if 100Hz. You now want to
assess displacements for each participants.</p>
<p><em>Note: the files are stored as Rdata to reduce the size of the
package – however the command only accepts txt files, hence it is
required to first convert Rdata to text files before running the
examples</em></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Locate the installed extdata/ folder (contains only .RData now)</span></span>
<span><span class="va">path_extdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"BalanceMate"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Find all .RData (case‐insensitive)</span></span>
<span><span class="va">rdata_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span></span>
<span>  <span class="va">path_extdata</span>,</span>
<span>  pattern    <span class="op">=</span> <span class="st">"\\.[Rr][Dd]ata$"</span>,</span>
<span>  full.names <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Convert each .RData to a .txt in a temp directory</span></span>
<span><span class="va">tmpdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">rdata_files</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span>  <span class="co"># e.g. loads object “Postural_DataA” into your session</span></span>
<span>  <span class="va">nm</span> <span class="op">&lt;-</span> <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/fileutils.html" class="external-link">file_path_sans_ext</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.table</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="va">nm</span><span class="op">)</span>,</span>
<span>    file      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmpdir</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">nm</span>, <span class="st">".txt"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    sep       <span class="op">=</span> <span class="st">","</span>,</span>
<span>    row.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    col.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quote     <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="co"># 4. Merge from the tempdir</span></span>
<span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Merge_PosData.html">Merge_PosData</a></span><span class="op">(</span></span>
<span>  directory_path <span class="op">=</span> <span class="va">tmpdir</span>,              </span>
<span>  SampleRate     <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  SessionDuration<span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataA.txt"</span>, Title <span class="op">=</span> <span class="st">"Participant A"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataB.txt"</span>, Title <span class="op">=</span> <span class="st">"Participant B"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-2-2.png" width="700"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataC.txt"</span>, Title <span class="op">=</span> <span class="st">"Participant C"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-2-3.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataD.txt"</span>, Title <span class="op">=</span> <span class="st">"Participant D"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-2-4.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataE.txt"</span>, Title <span class="op">=</span> <span class="st">"Participant E"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-2-5.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataF.txt"</span>, Title <span class="op">=</span> <span class="st">"Participant F"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-2-6.png" width="700"></p>
<p><strong><em>Note</em></strong>: you can adjust the size of the
Ellipse by using the <code>conf_level</code> argument.</p>
<p>However, you might also be interested in a specific sample of those
displacements, say between the 10th second and the 90th second. This can
be done using the arguments <code>time_col</code> to specify the column
containing the time stamp for each data points, and the the
<code>time_start</code> and <code>time_end</code> arguments to indicate
the limits between which you want to plot your spaghetti.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#path_to_data &lt;- system.file("extdata", package = "BalanceMate")</span></span>
<span><span class="co">#Data &lt;- Merge_PosData(path_to_data, SampleRate = 100, SessionDuration = 100)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataA.txt"</span>, time_col <span class="op">=</span> <span class="st">"Time"</span>, time_start <span class="op">=</span> <span class="fl">10</span>, time_end <span class="op">=</span> <span class="fl">90</span>, Title <span class="op">=</span> <span class="st">"Participant A"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataB.txt"</span>,  time_col <span class="op">=</span> <span class="st">"Time"</span>, time_start <span class="op">=</span> <span class="fl">10</span>, time_end <span class="op">=</span> <span class="fl">90</span>,Title <span class="op">=</span> <span class="st">"Participant B"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-3-2.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataC.txt"</span>,  time_col <span class="op">=</span> <span class="st">"Time"</span>, time_start <span class="op">=</span> <span class="fl">10</span>, time_end <span class="op">=</span> <span class="fl">90</span>,Title <span class="op">=</span> <span class="st">"Participant C"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-3-3.png" width="700"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataD.txt"</span>,  time_col <span class="op">=</span> <span class="st">"Time"</span>, time_start <span class="op">=</span> <span class="fl">10</span>, time_end <span class="op">=</span> <span class="fl">90</span>,Title <span class="op">=</span> <span class="st">"Participant D"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-3-4.png" width="700"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataE.txt"</span>,  time_col <span class="op">=</span> <span class="st">"Time"</span>, time_start <span class="op">=</span> <span class="fl">10</span>, time_end <span class="op">=</span> <span class="fl">90</span>,Title <span class="op">=</span> <span class="st">"Participant E"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-3-5.png" width="700"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/SpaghettEllipse.html">SpaghettEllipse</a></span><span class="op">(</span><span class="va">Data</span>, participant_id_col <span class="op">=</span> <span class="st">"file_name"</span>, participant_id <span class="op">=</span> <span class="st">"Postural_DataF.txt"</span>,  time_col <span class="op">=</span> <span class="st">"Time"</span>, time_start <span class="op">=</span> <span class="fl">10</span>, time_end <span class="op">=</span> <span class="fl">90</span>,Title <span class="op">=</span> <span class="st">"Participant F"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SpaghettEllipse_files/figure-html/unnamed-chunk-3-6.png" width="700"></p>
<p>But you might also prefer to plot more complex sway paths. For
instance, if your session contains unpleasant trials and pleasant
trials, you might want to compute <em>average sway paths across all
participants across all unpleasant trials</em> to compare it to
<em>average sway paths across all participants across all pleasant
trials</em>. This can be done with a little bit of effort and data
wrangling as can be seen in <a href="https://jeanmoneger.com/book/processing#visualise" class="external-link">the dedicated
subsection of the Balance mate guide book</a>.</p>
</div>
<div class="section level2">
<h2 id="further-readings">Further readings<a class="anchor" aria-label="anchor" href="#further-readings"></a>
</h2>
<p>See the the subsection on <a href="https://jeanmoneger.com/book/processing#visualise" class="external-link">Visualisation
in the Balance mate guide book</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jean Monéger.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
