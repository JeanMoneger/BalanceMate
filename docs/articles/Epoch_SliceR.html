<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Synthetise your data into time-bins • BalanceMate</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Synthetise your data into time-bins">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BalanceMate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Butterworth_it.html">Filtering Postural Data Using a Butterworth Filter</a></li>
    <li><a class="dropdown-item" href="../articles/Compute_Postural_Indicators.html">Compute Postural Indicators</a></li>
    <li><a class="dropdown-item" href="../articles/CoPX_ComputeR.html">Compute CoP X</a></li>
    <li><a class="dropdown-item" href="../articles/CoPY_ComputeR.html">Compute CoP-Y</a></li>
    <li><a class="dropdown-item" href="../articles/EllipseArea.html">Compute X% Confidence Ellipse Area</a></li>
    <li><a class="dropdown-item" href="../articles/Epoch_SliceR.html">Synthetise your data into time-bins</a></li>
    <li><a class="dropdown-item" href="../articles/Mean_CoP_ComputeR.html">Compute Mean CoP displacements</a></li>
    <li><a class="dropdown-item" href="../articles/Merge_PosData.html">Merge and Structure postural data</a></li>
    <li><a class="dropdown-item" href="../articles/SD_CoP_ComputeR.html">Compute Standard deviations of CoP displacements</a></li>
    <li><a class="dropdown-item" href="../articles/SpaghettEllipse.html">Visualise Stabilogram and Confidence Ellipse</a></li>
    <li><a class="dropdown-item" href="../articles/SPL_ComputeR.html">Compute Sway Path Length</a></li>
    <li><a class="dropdown-item" href="../articles/Time_StampeR.html">Time_StampeR</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JeanMoneger/BalanceMate/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Synthetise your data into time-bins</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JeanMoneger/BalanceMate/blob/HEAD/vignettes/Epoch_SliceR.Rmd" class="external-link"><code>vignettes/Epoch_SliceR.Rmd</code></a></small>
      <div class="d-none name"><code>Epoch_SliceR.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jeanmoneger.github.io/BalanceMate">BalanceMate</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p>The <code>Epoch_SliceR</code> command allows the user to compute
average scores at a specified time-bin level. Note that users familiar
with the <code>tidyverse</code> could once again do this data-wrangling
by exploiting this powerful package. Nevertheless, we assume that some
researchers might not be familiar with the pipe operators and specific
grammar of the <code>tidyverse.</code> Our package hence wants to
deliver a toolbox entailing the data-wrangling involved in postural
studies.</p>
<p>To use the <code>Epoch_SliceR</code>, you will need to determine the
columns of your data you would like to synthetise, the sample rate in
your protocol, and the time bin you want to define as your analysis
unit.</p>
</div>
<div class="section level2">
<h2 id="example-usage">Example Usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h2>
<p>In a study with 6 participants, where you measured body sway for 100
seconds with a sample rate of 100Hz, you would like to synthetise the
output in more comprehensible time bins of 1s.</p>
<p><em>Note: the files are stored as Rdata to reduce the size of the
package – however the command only accepts txt files, hence it is
required to first convert Rdata to text files before running the
examples</em></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Locate the installed extdata/ folder (contains only .RData now)</span></span>
<span><span class="va">path_extdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"BalanceMate"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Find all .RData (case‐insensitive)</span></span>
<span><span class="va">rdata_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span></span>
<span>  <span class="va">path_extdata</span>,</span>
<span>  pattern    <span class="op">=</span> <span class="st">"\\.[Rr][Dd]ata$"</span>,</span>
<span>  full.names <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Convert each .RData to a .txt in a temp directory</span></span>
<span><span class="va">tmpdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">rdata_files</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span>  <span class="co"># e.g. loads object “Postural_DataA” into your session</span></span>
<span>  <span class="va">nm</span> <span class="op">&lt;-</span> <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/fileutils.html" class="external-link">file_path_sans_ext</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.table</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="va">nm</span><span class="op">)</span>,</span>
<span>    file      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmpdir</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">nm</span>, <span class="st">".txt"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    sep       <span class="op">=</span> <span class="st">","</span>,</span>
<span>    row.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    col.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quote     <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="co"># 4. Merge from the tempdir</span></span>
<span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Merge_PosData.html">Merge_PosData</a></span><span class="op">(</span></span>
<span>  directory_path <span class="op">=</span> <span class="va">tmpdir</span>,              </span>
<span>  SampleRate     <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  SessionDuration<span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/Epoch_SliceR.html">Epoch_SliceR</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">Data</span>,</span>
<span>      ID <span class="op">=</span> <span class="st">"file_name"</span>,</span>
<span>      columns_to_synthesize <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CoP_X"</span>, <span class="st">"CoP_Y"</span><span class="op">)</span>,</span>
<span>      epoch_length <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      sample_rate<span class="op">=</span><span class="fl">100</span>,</span>
<span>      session_duration <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>,<span class="op">]</span> <span class="co"># Only display the first 20 rows of the resulting data set</span></span>
<span><span class="co">#&gt;    Epoch                 ID Mean_CoP_X    SD_CoP_X Mean_CoP_Y   SD_CoP_Y</span></span>
<span><span class="co">#&gt; 1      1 Postural_DataA.txt -0.7024449 0.173867501  0.8916070 0.25642546</span></span>
<span><span class="co">#&gt; 2      2 Postural_DataA.txt -0.5186725 0.066740330  0.7656363 0.18324255</span></span>
<span><span class="co">#&gt; 3      3 Postural_DataA.txt -0.6890181 0.069267113  2.1369338 0.60962621</span></span>
<span><span class="co">#&gt; 4      4 Postural_DataA.txt -0.4029652 0.044833013  1.9005180 0.26259576</span></span>
<span><span class="co">#&gt; 5      5 Postural_DataA.txt -0.7052528 0.131792523  1.0709691 0.44279270</span></span>
<span><span class="co">#&gt; 6      6 Postural_DataA.txt -0.4380722 0.087657215  0.2547817 0.14961517</span></span>
<span><span class="co">#&gt; 7      7 Postural_DataA.txt -0.4284532 0.142947394  0.7953204 0.34109958</span></span>
<span><span class="co">#&gt; 8      8 Postural_DataA.txt -0.7830691 0.065092438  0.4041888 0.12512986</span></span>
<span><span class="co">#&gt; 9      9 Postural_DataA.txt -1.2552830 0.190937625  0.4158023 0.34997661</span></span>
<span><span class="co">#&gt; 10    10 Postural_DataA.txt -2.2659777 0.962217816 -1.9179301 0.97684572</span></span>
<span><span class="co">#&gt; 11    11 Postural_DataA.txt -3.3595698 0.618323570 -3.4022902 0.35478534</span></span>
<span><span class="co">#&gt; 12    12 Postural_DataA.txt -2.3880310 0.051739285 -2.4947254 0.20979112</span></span>
<span><span class="co">#&gt; 13    13 Postural_DataA.txt -1.9896505 0.228912759 -2.2508496 0.27940784</span></span>
<span><span class="co">#&gt; 14    14 Postural_DataA.txt -2.1915058 0.060090049 -2.9024906 0.13201667</span></span>
<span><span class="co">#&gt; 15    15 Postural_DataA.txt -2.3655609 0.073103102 -3.1118372 0.17515217</span></span>
<span><span class="co">#&gt; 16    16 Postural_DataA.txt -1.9394468 0.130573375 -2.7493037 0.09299264</span></span>
<span><span class="co">#&gt; 17    17 Postural_DataA.txt -2.0392773 0.091248074 -2.7487253 0.22085367</span></span>
<span><span class="co">#&gt; 18    18 Postural_DataA.txt -1.9782206 0.048485111 -1.7467458 0.23003184</span></span>
<span><span class="co">#&gt; 19    19 Postural_DataA.txt -1.9057557 0.008561508 -1.7430775 0.21909308</span></span>
<span><span class="co">#&gt; 20    20 Postural_DataA.txt -1.8889550 0.031675276 -2.0004698 0.12099222</span></span>
<span><span class="co">#&gt;          Fx       Fy       Fz        Mx       My       Mz  Time</span></span>
<span><span class="co">#&gt; 1   7.24049  7.22547 790.0556   5.47499  7.68121 -0.16553  0.01</span></span>
<span><span class="co">#&gt; 2   8.17798  7.49855 787.0564   9.07368  3.72468 -0.33309  1.01</span></span>
<span><span class="co">#&gt; 3   7.64578  3.32801 788.1440   7.30857  5.00166 -0.07153  2.01</span></span>
<span><span class="co">#&gt; 4   7.36464  7.58037 788.3662  18.64679  4.16675 -0.09964  3.01</span></span>
<span><span class="co">#&gt; 5   7.07065  4.53257 791.9065  11.74987  3.10929 -0.46487  4.01</span></span>
<span><span class="co">#&gt; 6   7.16560  2.58599 795.2873   1.46415  4.99527 -0.05933  5.01</span></span>
<span><span class="co">#&gt; 7   8.18843  6.03179 791.7661   2.90070  2.05729  0.03357  6.01</span></span>
<span><span class="co">#&gt; 8   7.48626  6.19599 790.5765   6.59688  5.33052  0.17790  7.01</span></span>
<span><span class="co">#&gt; 9   9.09846  6.48043 791.8034   4.10223  6.55580 -0.65067  8.01</span></span>
<span><span class="co">#&gt; 10  9.77147  6.15390 787.0906  -4.26372 10.20867 -0.20830  9.01</span></span>
<span><span class="co">#&gt; 11  3.29982 -1.47769 790.3542 -29.32771 32.18591 -0.04585 10.01</span></span>
<span><span class="co">#&gt; 12 10.08275  5.03516 784.4031 -19.52301 18.93200  0.49706 11.01</span></span>
<span><span class="co">#&gt; 13  8.28538  4.79361 787.7741 -17.88359 18.31476  0.10103 12.01</span></span>
<span><span class="co">#&gt; 14  8.07756  4.57128 790.2765 -21.33327 16.38724  0.57736 13.01</span></span>
<span><span class="co">#&gt; 15  7.12581  3.01768 790.4504 -25.97112 18.74557  0.35034 14.01</span></span>
<span><span class="co">#&gt; 16  7.64705  4.30164 788.7791 -23.15770 17.72657  0.26202 15.01</span></span>
<span><span class="co">#&gt; 17  9.45856  4.03266 786.7954 -22.23448 13.84823  0.31733 16.01</span></span>
<span><span class="co">#&gt; 18  8.87557  3.56415 788.6654 -18.38271 15.36093  0.22083 17.01</span></span>
<span><span class="co">#&gt; 19  7.96229  5.68097 788.8219 -12.11690 15.06458  0.09314 18.01</span></span>
<span><span class="co">#&gt; 20  8.68985  2.87464 787.6806 -17.27262 15.02250  0.28614 19.01</span></span></code></pre></div>
<p>Note that this approach is not particularly recommended, unless you
are working with extremely large data sets. In all other cases, you
might want to keep your raw complete data sets and further compute
postural indicators using time bins arguments (i.e., epoch
specification).</p>
</div>
<div class="section level2">
<h2 id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<p>See the <a href="https://jeanmoneger.com/book/managing-1" class="external-link">Managing
section of the BalanceMate guide book</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jean Monéger.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
